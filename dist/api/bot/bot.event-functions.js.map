{"version":3,"sources":["../../../src/api/bot/bot.event-functions.js"],"names":["onReady","onReceivedMessage","log","require","setInterval","currentTime","Date","toLocaleTimeString","split","hour","parseInt","minute","second","channels","forEach","channel","type","send","message","COMMAND","params"],"mappings":";;;;;QAmBgBA,O,GAAAA,O;QAkCAC,iB,GAAAA,iB;;AArDhB;;;;AACA;;AASA;;;;AAOA,IAAMC,MAAMC,QAAQ,OAAR,EAAiB,qBAAjB,CAAZ;;AAEO,SAASH,OAAT,GAAmB;AACxBE;;AAEA;AACAE,cAAY,YAAM;AAChB,QAAMC,cAAc,IAAIC,IAAJ,GAAWC,kBAAX,GAAgCC,KAAhC,CAAsC,GAAtC,CAApB;AACA,QAAMC,OAAOC,SAASL,YAAY,CAAZ,CAAT,EAAyB,EAAzB,CAAb;AACA,QAAMM,SAASD,SAASL,YAAY,CAAZ,CAAT,EAAyB,EAAzB,CAAf;AACA,QAAMO,SAASF,SAASL,YAAY,CAAZ,CAAT,EAAyB,EAAzB,CAAf;AACAH,QAAIO,IAAJ,EAAUE,MAAV,EAAkBC,MAAlB;;AAEA;AACA,QAAIH,SAAS,CAAT,IAAcE,WAAW,CAAzB,IAA8BC,WAAW,CAA7C,EAAgD;AAC9C,oBAAMC,QAAN,CAAeC,OAAf,CAAuB,UAACC,OAAD,EAAa;AAClC,YAAIA,QAAQC,IAAR,KAAiB,MAArB,EAA6B;AAC3BD,kBAAQE,IAAR;AACD;AACF,OAJD;AAKD,KAND,MAMO,IAAIR,SAAS,EAAT,IAAeE,WAAW,CAA1B,IAA+BC,WAAW,CAA9C,EAAiD;AACtD,oBAAMC,QAAN,CAAeC,OAAf,CAAuB,UAACC,OAAD,EAAa;AAClC,YAAIA,QAAQC,IAAR,KAAiB,MAArB,EAA6B;AAC3BD,kBAAQE,IAAR;AACD;AACF,OAJD;AAKD,KANM,MAMA,IAAIR,SAAS,EAAT,IAAeE,WAAW,CAA1B,IAA+BC,WAAW,CAA9C,EAAiD;AACtD,oBAAMC,QAAN,CAAeC,OAAf,CAAuB,UAACC,OAAD,EAAa;AAClC,YAAIA,QAAQC,IAAR,KAAiB,MAArB,EAA6B;AAC3BD,kBAAQE,IAAR;AACD;AACF,OAJD;AAKD;AACF,GA3BD,EA2BG,IA3BH;AA4BD;;AAEM,SAAShB,iBAAT,CAA2BiB,OAA3B,EAAoC;AAAA,sBACb,wBAAaA,OAAb,CADa;AAAA,MACjCC,OADiC,iBACjCA,OADiC;AAAA,MACxBC,MADwB,iBACxBA,MADwB;;AAGzC,MAAID,OAAJ,EAAa;AACXjB,sBAAgBiB,OAAhB,kBAAoCC,MAApC;;AAEA,YAAQD,OAAR;AACE;AAAwB,sCAAmBD,QAAQH,OAA3B,EAAoCK,MAApC;AACtB;AACF;AAAqB,iCAAcF,QAAQH,OAAtB;AACnB;AACF;AAAS,yBAAMG,QAAQH,OAAd,uBAA0CI,OAA1C;AALX;AAOD;AACF","file":"bot.event-functions.js","sourcesContent":["import Botus from './bot.class';\nimport {\n  WELCOME_MESSAGE,\n  COMMAND_RANDOMIZE,\n  COMMAND_GIFFME,\n  IMAGES,\n  GREETING_MORNING,\n  GREETING_NOON,\n  GREETING_EVENING,\n} from './bot.constants';\nimport {\n  error,\n  parseMessage,\n  getRandomizedTeams,\n  getRandomMeme,\n} from './bot.utils';\n\nconst log = require('debug')('bot.event-functions');\n\nexport function onReady() {\n  log(`${WELCOME_MESSAGE} Nigga im alive`);\n\n  // Loop for checking the current time\n  setInterval(() => {\n    const currentTime = new Date().toLocaleTimeString().split(':');\n    const hour = parseInt(currentTime[0], 10);\n    const minute = parseInt(currentTime[1], 10);\n    const second = parseInt(currentTime[2], 10);\n    log(hour, minute, second);\n\n    // Morning, Noon, and Evening greeting\n    if (hour === 7 && minute === 0 && second === 0) {\n      Botus.channels.forEach((channel) => {\n        if (channel.type === 'text') {\n          channel.send(GREETING_MORNING);\n        }\n      });\n    } else if (hour === 12 && minute === 0 && second === 0) {\n      Botus.channels.forEach((channel) => {\n        if (channel.type === 'text') {\n          channel.send(GREETING_NOON);\n        }\n      });\n    } else if (hour === 19 && minute === 0 && second === 0) {\n      Botus.channels.forEach((channel) => {\n        if (channel.type === 'text') {\n          channel.send(GREETING_EVENING);\n        }\n      });\n    }\n  }, 1000);\n}\n\nexport function onReceivedMessage(message) {\n  const { COMMAND, params } = parseMessage(message);\n\n  if (COMMAND) {\n    log(`COMMAND: ${COMMAND}, params: ${params}`);\n\n    switch (COMMAND) {\n      case COMMAND_RANDOMIZE: getRandomizedTeams(message.channel, params);\n        break;\n      case COMMAND_GIFFME: getRandomMeme(message.channel, IMAGES);\n        break;\n      default: error(message.channel, `Invalid command ${COMMAND}`);\n    }\n  }\n}\n"]}