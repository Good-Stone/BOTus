{"version":3,"sources":["../../../src/api/bot/bot.event-functions.js"],"names":["onReady","onReceivedMessage","log","require","user","setGame","setInterval","currentTime","tz","format","channels","forEach","channel","type","send","message","COMMAND","params"],"mappings":";;;;;QAsBgBA,O,GAAAA,O;QA+BAC,iB,GAAAA,iB;;AArDhB;;;;AACA;;;;AACA;;AAUA;;;;AAQA,IAAMC,MAAMC,QAAQ,OAAR,EAAiB,qBAAjB,CAAZ;;AAEO,SAASH,OAAT,GAAmB;AACxBE;AACA,gBAAME,IAAN,CAAWC,OAAX,CAAmB,aAAnB;;AAEA;AACAC,cAAY,YAAM;AAChB,QAAMC,cAAc,yBAAOC,EAAP,CAAU,aAAV,EAAyBC,MAAzB,CAAgC,WAAhC,CAApB;;AAEA;AACA,QAAIF,gBAAgB,YAApB,EAAkC;AAChC,oBAAMG,QAAN,CAAeC,OAAf,CAAuB,UAACC,OAAD,EAAa;AAClC,YAAIA,QAAQC,IAAR,KAAiB,MAArB,EAA6B;AAC3BD,kBAAQE,IAAR;AACD;AACF,OAJD;AAKD,KAND,MAMO,IAAIP,gBAAgB,aAApB,EAAmC;AACxC,oBAAMG,QAAN,CAAeC,OAAf,CAAuB,UAACC,OAAD,EAAa;AAClC,YAAIA,QAAQC,IAAR,KAAiB,MAArB,EAA6B;AAC3BD,kBAAQE,IAAR;AACD;AACF,OAJD;AAKD,KANM,MAMA,IAAIP,gBAAgB,YAApB,EAAkC;AACvC,oBAAMG,QAAN,CAAeC,OAAf,CAAuB,UAACC,OAAD,EAAa;AAClC,YAAIA,QAAQC,IAAR,KAAiB,MAArB,EAA6B;AAC3BD,kBAAQE,IAAR;AACD;AACF,OAJD;AAKD;AACF,GAvBD,EAuBG,IAvBH;AAwBD;;AAEM,SAASb,iBAAT,CAA2Bc,OAA3B,EAAoC;AAAA,sBACb,wBAAaA,OAAb,CADa;AAAA,MACjCC,OADiC,iBACjCA,OADiC;AAAA,MACxBC,MADwB,iBACxBA,MADwB;;AAGzC,MAAID,OAAJ,EAAa;AACXd,sBAAgBc,OAAhB,kBAAoCC,MAApC;;AAEA,YAAQD,OAAR;AACE;AAAwB,sCAAmBD,QAAQH,OAA3B,EAAoCK,MAApC;AACtB;AACF;AAAqB,iCAAcF,QAAQH,OAAtB;AACnB;AACF;AAAmB,2BAAQG,QAAQH,OAAhB,EAAyBK,MAAzB;AACjB;AACF;AAAS,yBAAMF,QAAQH,OAAd,uBAA0CI,OAA1C;AAPX;AASD;AACF","file":"bot.event-functions.js","sourcesContent":["import moment from 'moment-timezone';\nimport Botus from './bot.class';\nimport {\n  WELCOME_MESSAGE,\n  COMMAND_RANDOMIZE,\n  COMMAND_GIFFME,\n  COMMAND_TIME,\n  IMAGES,\n  GREETING_MORNING,\n  GREETING_NOON,\n  GREETING_EVENING,\n} from './bot.constants';\nimport {\n  error,\n  parseMessage,\n  getRandomizedTeams,\n  getRandomMeme,\n  getTime,\n} from './bot.utils';\n\nconst log = require('debug')('bot.event-functions');\n\nexport function onReady() {\n  log(`${WELCOME_MESSAGE} Nigga im alive`);\n  Botus.user.setGame('with my Dog');\n\n  // Loop for checking the current time\n  setInterval(() => {\n    const currentTime = moment.tz('Asia/Manila').format('h:mm:ss a');\n\n    // Morning, Noon, and Evening greeting\n    if (currentTime === '7:00:00 am') {\n      Botus.channels.forEach((channel) => {\n        if (channel.type === 'text') {\n          channel.send(GREETING_MORNING);\n        }\n      });\n    } else if (currentTime === '12:00:00 pm') {\n      Botus.channels.forEach((channel) => {\n        if (channel.type === 'text') {\n          channel.send(GREETING_NOON);\n        }\n      });\n    } else if (currentTime === '7:00:00 pm') {\n      Botus.channels.forEach((channel) => {\n        if (channel.type === 'text') {\n          channel.send(GREETING_EVENING);\n        }\n      });\n    }\n  }, 1000);\n}\n\nexport function onReceivedMessage(message) {\n  const { COMMAND, params } = parseMessage(message);\n\n  if (COMMAND) {\n    log(`COMMAND: ${COMMAND}, params: ${params}`);\n\n    switch (COMMAND) {\n      case COMMAND_RANDOMIZE: getRandomizedTeams(message.channel, params);\n        break;\n      case COMMAND_GIFFME: getRandomMeme(message.channel, IMAGES);\n        break;\n      case COMMAND_TIME: getTime(message.channel, params);\n        break;\n      default: error(message.channel, `Invalid command ${COMMAND}`);\n    }\n  }\n}\n"]}